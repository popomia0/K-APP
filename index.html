<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kijote</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a2e0e9e1f5.js" crossorigin="anonymous"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #f8f8f8;
      color: #111;
      scroll-behavior: smooth;
      transition: background 0.3s, color 0.3s;
    }
    header {
      background: #111;
      color: white;
      padding: 2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    /* Parallax header */
    :root { --parallaxY: 0px; }
    header.parallax::before {
      content: '';
      position: absolute;
      inset: -15%;
      background-image: url('7.png');
      background-size: cover;
      background-position: center calc(50% + var(--parallaxY));
      will-change: transform, background-position;
      transform: translateY(calc(var(--parallaxY) * -0.2));
      z-index: 0;
      filter: brightness(0.6);
    }
    header.parallax::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0.35));
      z-index: 0;
    }
    header.parallax > * { position: relative; z-index: 1; }
    @media (prefers-reduced-motion: reduce) {
      header.parallax::before { transform: none; background-attachment: fixed; }
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 2rem;
      padding: 1rem;
      background: #fff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      position: relative;
    }
    nav.is-scrolled {
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      backdrop-filter: saturate(180%) blur(8px);
    }
    nav a {
      text-decoration: none;
      color: #111;
      font-weight: bold;
      transition: color 0.3s;
    }
    nav a:hover {
      color: #666;
    }
    nav a.active {
      color: #111;
    }
    nav a.active::after {
      width: 100%;
    }
    .menu-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #111;
      padding: 0.5rem;
      transition: transform 0.3s ease;
    }
    .menu-toggle:hover {
      transform: scale(1.1);
    }
    .dark-mode .menu-toggle {
      color: #f8f8f8;
    }
    .menu-close {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #111;
      padding: 0.5rem;
      position: absolute;
      right: 1rem;
      top: 1rem;
      z-index: 1002;
    }
    .dark-mode .menu-close {
      color: #f8f8f8;
    }
    .nav-container {
      position: relative;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 2rem;
    }
    .nav-logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: #111;
      text-decoration: none;
      flex-shrink: 0;
      margin-right: 2rem;
    }
    .nav-logo img {
      height: 60px;
      width: auto;
      transition: transform 0.3s ease;
      max-width: 180px;
    }
    .nav-logo img:hover {
      transform: scale(1.05);
    }
    @media (max-width: 768px) {
      .nav-logo img {
        height: 45px;
        max-width: 140px;
      }
      .nav-container {
        flex-direction: column;
        align-items: stretch;
        padding: 1rem;
      }
      .nav-logo {
        margin-right: 0;
        margin-bottom: 1rem;
        text-align: center;
      }
      .menu-toggle {
        display: block;
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        z-index: 1001;
      }
      .menu-close {
        display: none;
      }
      nav.menu-open .menu-toggle {
        display: none;
      }
      nav.menu-open .menu-close {
        display: block;
      }
      .nav-links {
        flex-direction: column;
        gap: 0;
        width: 100%;
        display: none;
        background: #fff;
        border-radius: 8px;
        margin-top: 1rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }
      nav.menu-open .nav-links {
        display: flex;
      }
      nav a {
        padding: 1rem;
        border-bottom: 1px solid #eee;
        width: 100%;
        text-align: center;
        transition: background 0.3s ease;
      }
      nav a:hover {
        background: #f5f5f5;
      }
      .dark-mode .nav-links {
        background: #000;
      }
      .dark-mode nav a {
        border-bottom-color: #333;
      }
      .dark-mode nav a:hover {
        background: #333;
      }
      .dropdown-content {
        position: static;
        box-shadow: none;
        background: #f8f8f8;
        margin: 0;
        transform: none;
        border-radius: 0;
      }
      .dark-mode .dropdown-content {
        background: #222;
      }
      .dropdown-content a {
        padding: 0.8rem 2rem;
        margin: 0;
        border-radius: 0;
      }
    }
    .section {
      padding: 4rem 2rem;
      max-width: 1000px;
      margin: auto;
    }
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }
    .gallery img {
      width: 100%;
      border-radius: 8px;
    }
    .dark-mode {
      background: #111;
      color: #f8f8f8;
    }
    .dark-mode nav, .dark-mode footer {
      background: #000;
    }
    .dark-mode nav a {
      color: #f8f8f8;
    }
    footer {
      text-align: center;
      padding: 2rem;
      background: #111;
      color: #fff;
    }
    .toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: none;
      border: 2px solid #111;
      border-radius: 8px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-weight: bold;
    }
    .dark-mode .toggle {
      border-color: #fff;
      color: #fff;
    }
    .social-icons {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-top: 1rem;
    }
    .social-icons a {
      color: inherit;
      font-size: 1.5rem;
    }
    .projects {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    .project {
      background: #fff;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .project img {
      width: 100%;
      border-radius: 6px;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    input, textarea {
      padding: 0.8rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button[type="submit"] {
      padding: 0.8rem;
      font-weight: bold;
      background: #111;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .social-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }
    .social-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 2rem;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-decoration: none;
      color: inherit;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .social-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    /* Scroll reveal */
    .reveal {
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 600ms ease, transform 600ms ease;
      will-change: opacity, transform;
    }
    .reveal.is-visible {
      opacity: 1;
      transform: none;
    }
    .social-card i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: #111;
    }
    .social-card h3 {
      margin: 0 0 0.5rem 0;
      font-size: 1.5rem;
    }
    .social-card p {
      margin: 0;
      color: #666;
      font-size: 0.9rem;
    }
    .dark-mode .social-card {
      background: #000;
      color: #f8f8f8;
    }
    .dark-mode .social-card i {
      color: #f8f8f8;
    }
    .dark-mode .social-card p {
      color: #ccc;
    }
    .nav-links {
      display: flex;
      gap: 2rem;
      align-items: center;
      flex: 1;
      justify-content: center;
      transition: all 0.3s ease;
    }
    .nav-links a {
      position: relative;
      padding: 0.5rem 0;
    }
    .nav-links a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 0;
      background-color: #111;
      transition: width 0.3s ease;
    }
    .nav-links a:hover::after {
      width: 100%;
    }
    .dark-mode .nav-links a::after {
      background-color: #f8f8f8;
    }
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background: #fff;
      min-width: 200px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      border-radius: 8px;
      z-index: 1000;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      margin-top: 0.5rem;
    }
    .dropdown:hover .dropdown-content {
      display: block;
    }
    .dropdown-content a {
      color: #111;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      border-radius: 8px;
      margin: 4px;
      transition: background 0.3s;
    }
    .dropdown-content a:hover {
      background: #f5f5f5;
    }
    .dark-mode .dropdown-content {
      background: #000;
      color: #f8f8f8;
    }
    .dark-mode .dropdown-content a:hover {
      background: #333;
    }
  </style>
</head>
<body>
  <button class="toggle" onclick="toggleMode()">Toggle Mode</button>

  <header class="parallax">
    <h1>Kijote</h1>
    <p>Tech ,Media & Entertainment</p>
    <div class="social-icons">
      <a href="https://www.instagram.com/kijote_official/"><i class="fab fa-instagram"></i></a>
      <a href="https://www.youtube.com/@kijote_official"><i class="fab fa-youtube"></i></a>
      <a href="https://soundcloud.com/chris-music-lol"><i class="fab fa-soundcloud"></i></a>
      <a href="https://x.com/kijoteofficial"><i class="fab fa-twitter"></i></a>
    </div>
  </header>

  <nav>
    <div class="nav-container">
      <a href="#" class="nav-logo">
        <img src="1.png" alt="Kijote Logo">
      </a>
      <div class="nav-links">
        <a href="#about">About</a>
        <a href="#work">Work</a>
        <a href="#gallery">Gallery</a>
        <a href="#contact">Contact</a>
        <a href="#social-media">Social</a>
        <a href="#newsletter">Newsletter</a>
      </div>
      <button class="menu-toggle" onclick="toggleMenu()">☰</button>
      <button class="menu-close" onclick="closeMenu()">✕</button>
    </div>
  </nav>

  <section id="about" class="section">
    <h2>About</h2>
    <p>Kijote is a media and entertainment company creating stories that move. We make websites, apps, short films, music, art, photography, and games. Every project is a blend of emotion and edge crafted with care, driven by purpose.</p>
  </section>

  <section id="work" class="section">
    <h2>Our Work</h2>
    <div class="projects">
      <div class="project">
        <img src="soup.png" alt="Project Image">
        <h3>@ Soup: The Album</h3>
        <p>"@ Soup" is a album released in 2025 by the co-founder of Kijote, Jide.
            In our passion to change things, this was an initial step to show to people what Kijote is capable of.
        </p>
        <a href="https://www.youtube.com/watch?v=WaUwj_8CeXo&list=OLAK5uy_kVdntD1ZhM87yexLn4fzqJoFxeljJyolM">@ Soup</a>
      </div>
      <div class="project">
        <img src="free.png" alt="Project Image">
        <h3>"Free": The Music Video</h3>
        <p>This is a music video for a song in @ Soup, named: Free.
            This song was directed and shot by co-founder: Seth (Silver).
            It was shot in Berlin, in the historical wall of Berlin. This was of huge importance, because the song sampled was <a href="https://youtu.be/TQkAIx4YjSo?feature=shared">Libre</a> by Nino Bravo.
            A song that speaks on the longing of freedom by a man in 1940 Germany. Trying to make it past the wall.
        </p>
        <a href="https://youtu.be/PGFAZTjVa70?feature=shared">View Project</a>
      </div>
    </div>
  </section>

  <section id="gallery" class="section">
    <h2>Gallery</h2>
    <div class="gallery">
      <img src="1.png" alt="Art 1" />
      <img src="6.png" alt="Art 2" />
      <img src="3.png" alt="Art 3" />
    </div>
  </section>

  <section id="contact" class="section">
    <h2>Contact</h2>
    <form action="#" method="POST">
      <input type="text" name="name" placeholder="Your Name" required>
      <input type="email" name="email" placeholder="Your Email" required>
      <textarea name="message" rows="5" placeholder="Your Message" required></textarea>
      <button type="submit">Send</button>
    </form>
  </section>

  <section id="social-media" class="section">
    <h2>Follow Us</h2>
    <p>Stay connected with Kijote across all our social media platforms</p>
    <div class="social-grid">
      <a href="https://www.instagram.com/kijote_official/" class="social-card">
        <i class="fab fa-instagram"></i>
        <h3>Instagram</h3>
        <p>Follow our creative journey</p>
      </a>
      <a href="https://www.youtube.com/@kijote_official" class="social-card">
        <i class="fab fa-youtube"></i>
        <h3>YouTube</h3>
        <p>Watch our latest content</p>
      </a>
      <a href="https://soundcloud.com/chris-music-lol" class="social-card">
        <i class="fab fa-soundcloud"></i>
        <h3>SoundCloud</h3>
        <p>Listen to our music</p>
      </a>
      <a href="https://x.com/kijoteofficial" class="social-card">
        <i class="fab fa-twitter"></i>
        <h3>Twitter</h3>
        <p>Get real-time updates</p>
      </a>
    </div>
  </section>

  <section id="newsletter" class="section">
    <h2>Newsletter</h2>
    <p>Get updates on new projects, releases, and behind-the-scenes.</p>
    <form id="newsletter-form" action="#" method="POST">
      <input type="email" name="email" placeholder="Your Email" required>
      <button type="submit">Subscribe</button>
    </form>
    <p id="newsletter-status" aria-live="polite"></p>
  </section>

  <footer>
    <p>&copy; 2025 Kijote. All rights reserved.</p>
  </footer>

  <script>
    // Supabase credentials (replace with your project values)
    window.SUPABASE_URL = 'https://xrfmpdgligexahiigaqa.supabase.co';
    window.SUPABASE_ANON = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhyZm1wZGdsaWdleGFoaWlnYXFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMDIzNDEsImV4cCI6MjA3MTc3ODM0MX0.7pW9o0VTCK7nW-6UfFA3FtfP-zzpLIjIgPXlS_5evtE';
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    function toggleMode() {
      document.body.classList.toggle('dark-mode');
    }

    function toggleMenu() {
      const nav = document.querySelector('nav');
      nav.classList.toggle('menu-open');
    }

    function closeMenu() {
      const nav = document.querySelector('nav');
      nav.classList.remove('menu-open');
    }
    
    // Enhance: sticky nav shadow on scroll
    const navEl = document.querySelector('nav');
    const onScrollNav = () => {
      if (window.scrollY > 8) {
        navEl.classList.add('is-scrolled');
      } else {
        navEl.classList.remove('is-scrolled');
      }
    };
    onScrollNav();
    window.addEventListener('scroll', onScrollNav, { passive: true });

    // Enhance: scroll reveal animations
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const revealTargets = [
      ...document.querySelectorAll('.section'),
      ...document.querySelectorAll('.project'),
      ...document.querySelectorAll('.social-card'),
      ...document.querySelectorAll('.gallery img')
    ];
    if (!prefersReduced && 'IntersectionObserver' in window) {
      revealTargets.forEach(el => el.classList.add('reveal'));
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            obs.unobserve(entry.target);
          }
        });
      }, { rootMargin: '0px 0px -10% 0px', threshold: 0.15 });
      revealTargets.forEach(el => io.observe(el));
    }

    // Enhance: active link highlighting based on section in view
    const sections = Array.from(document.querySelectorAll('section.section'));
    const links = Array.from(document.querySelectorAll('nav .nav-links a'));
    const idToLink = new Map(links.map(a => [a.getAttribute('href')?.replace('#',''), a]));

    const setActiveLink = (id) => {
      links.forEach(a => a.classList.remove('active'));
      const link = idToLink.get(id);
      if (link) link.classList.add('active');
    };

    if ('IntersectionObserver' in window) {
      const sectionObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            setActiveLink(entry.target.id);
          }
        });
      }, { threshold: 0.6 });
      sections.forEach(sec => sectionObserver.observe(sec));
    }

    // Close mobile menu when a link is clicked
    links.forEach(a => a.addEventListener('click', () => closeMenu()));
    
    // Parallax header scroll handler
    (function(){
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const headerEl = document.querySelector('header.parallax');
      if (!headerEl) return;
      let ticking = false;
      const update = () => {
        ticking = false;
        if (prefersReduced) return;
        const rect = headerEl.getBoundingClientRect();
        const viewportH = window.innerHeight || document.documentElement.clientHeight;
        // Offset based on how far header is from center of viewport
        const centerOffset = (rect.top + rect.height/2) - viewportH/2;
        const clamped = Math.max(-400, Math.min(400, centerOffset));
        document.documentElement.style.setProperty('--parallaxY', `${clamped}px`);
      };
      const onScroll = () => {
        if (!ticking) {
          window.requestAnimationFrame(update);
          ticking = true;
        }
      };
      update();
      window.addEventListener('scroll', onScroll, { passive: true });
      window.addEventListener('resize', update);
    })();

    // Supabase setup and features
    let supabaseClient = null;
    if (typeof window.supabase !== 'undefined' && window.SUPABASE_URL.startsWith('http')) {
      supabaseClient = window.supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON);
    } else {
      console.warn('Supabase not configured. Set window.SUPABASE_URL and window.SUPABASE_ANON, or replace placeholders.');
    }

    async function saveContactMessage(formData) {
      if (!supabaseClient) return { error: 'Supabase not configured' };
      return await supabaseClient.from('contact_messages').insert({
        name: formData.get('name'),
        email: formData.get('email'),
        message: formData.get('message')
      });
    }

    async function saveNewsletter(email) {
      if (!supabaseClient) return { error: 'Supabase not configured' };
      return await supabaseClient.from('newsletter_signups').insert({ email });
    }

    async function loadProjects() {
      const container = document.querySelector('#work .projects');
      if (!container || !supabaseClient) return;
      const { data, error } = await supabaseClient
        .from('projects')
        .select('id, title, description, image_url, link_url, likes')
        .order('id', { ascending: true });
      if (error || !data || data.length === 0) return;
      container.innerHTML = '';
      data.forEach(project => {
        const card = document.createElement('div');
        card.className = 'project reveal';
        card.innerHTML = `
          <img src="${project.image_url}" alt="${project.title}">
          <h3>${project.title}</h3>
          <p>${project.description || ''}</p>
          <div style="display:flex; gap:1rem; align-items:center;">
            <a href="${project.link_url || '#'}">View Project</a>
            <button data-like-project-id="${project.id}" aria-label="Like">❤️</button>
            <span data-like-count="${project.id}">${project.likes ?? 0}</span>
          </div>
        `;
        container.appendChild(card);
      });
      attachLikeHandlers();
    }

    async function loadGallery() {
      const grid = document.querySelector('#gallery .gallery');
      if (!grid || !supabaseClient) return;
      const { data, error } = await supabaseClient
        .from('gallery_images')
        .select('image_url, alt, sort_order')
        .order('sort_order', { ascending: true });
      if (error || !data || data.length === 0) return;
      grid.innerHTML = '';
      data.forEach(img => {
        const el = document.createElement('img');
        el.src = img.image_url; el.alt = img.alt || 'Gallery image';
        el.className = 'reveal';
        grid.appendChild(el);
      });
    }

    function attachLikeHandlers() {
      if (!supabaseClient) return;
      document.querySelectorAll('[data-like-project-id]').forEach(btn => {
        btn.addEventListener('click', async () => {
          const projectId = btn.getAttribute('data-like-project-id');
          const countEl = document.querySelector(`[data-like-count="${projectId}"]`);
          btn.disabled = true;
          await supabaseClient.rpc('increment_project_like', { pid: Number(projectId) }).catch(()=>{});
          const { data } = await supabaseClient
            .from('projects')
            .select('likes')
            .eq('id', projectId)
            .single();
          if (data && typeof data.likes === 'number' && countEl) countEl.textContent = String(data.likes);
          btn.disabled = false;
        });
      });
    }

    async function recordPageView() {
      if (!supabaseClient) return;
      try {
        await supabaseClient.from('page_views').insert({
          path: location.pathname,
          user_agent: navigator.userAgent
        });
      } catch (e) {}
    }

    // Wire forms
    const contactForm = document.querySelector('#contact form');
    if (contactForm) {
      contactForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData(contactForm);
        contactForm.querySelector('button[type="submit"]').disabled = true;
        const { error } = await saveContactMessage(formData);
        contactForm.querySelector('button[type="submit"]').disabled = false;
        if (!error) {
          alert('Message sent!');
          contactForm.reset();
        } else {
          alert('Failed to send. Please try again later.');
        }
      });
    }

    const newsletterForm = document.querySelector('#newsletter-form');
    const newsletterStatus = document.querySelector('#newsletter-status');
    if (newsletterForm) {
      newsletterForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = new FormData(newsletterForm).get('email');
        newsletterForm.querySelector('button[type="submit"]').disabled = true;
        const { error } = await saveNewsletter(email);
        newsletterForm.querySelector('button[type="submit"]').disabled = false;
        if (!error) {
          newsletterStatus.textContent = 'Subscribed!';
          newsletterForm.reset();
        } else {
          newsletterStatus.textContent = 'Failed to subscribe. Try again.';
        }
      });
    }

    // Initialize dynamic features
    loadProjects();
    loadGallery();
    recordPageView();
  </script>
</body>
</html>
